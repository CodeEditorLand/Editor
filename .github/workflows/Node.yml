name: Node

concurrency:
    group: Node-${{ github.workflow }}-${{ github.ref }}
    cancel-in-progress: true

permissions:
    security-events: write
    contents: write
    pull-requests: write

on:
    workflow_dispatch:
    push:
        branches: [Current]
    pull_request:
        branches: [Current]
    workflow_call:

jobs:
    Pre-Publish:
        runs-on: ubuntu-latest

        env:
            ADBLOCK: true
            ASTRO_TELEMETRY_DISABLED: 1
            AUTOMATEDLAB_TELEMETRY_OPTOUT: 1
            AZURE_CORE_COLLECT_TELEMETRY: 0
            CHOOSENIM_NO_ANALYTICS: 1
            DIEZ_DO_NOT_TRACK: 1
            DOTNET_CLI_TELEMETRY_OPTOUT: 1
            DOTNET_INTERACTIVE_CLI_TELEMETRY_OPTOUT: 1
            DO_NOT_TRACK: 1
            ET_NO_TELEMETRY: 1
            GATSBY_TELEMETRY_DISABLED: 1
            GATSBY_TELEMETRY_OPTOUT: 1
            GATSBY_TELEMETRY_OPT_OUT: 1
            GRIT_TELEMETRY_DISABLED: 1
            HASURA_GRAPHQL_ENABLE_TELEMETRY: false
            HINT_TELEMETRY: off
            HOMEBREW_NO_ANALYTICS: 1
            INFLUXD_REPORTING_DISABLED: true
            ITERATIVE_DO_NOT_TRACK: 1
            NEXT_TELEMETRY_DEBUG: 1
            NEXT_TELEMETRY_DISABLED: 1
            NG_CLI_ANALYTICS: false
            NUXT_TELEMETRY_DISABLED: 1
            PIN_DO_NOT_TRACK: 1
            POWERSHELL_TELEMETRY_OPTOUT: 1
            SAM_CLI_TELEMETRY: 0
            STNOUPGRADE: 1
            STRIPE_CLI_TELEMETRY_OPTOUT: 1
            TELEMETRY_DISABLED: 1

        strategy:
            matrix:
                node-version: [18, 19, 20]

        steps:
            - uses: actions/checkout@v4.1.2

            - uses: pnpm/action-setup@v3.0.0
              with:
                  version: 8.15.5
                  run_install: |
                      - recursive: true
                        args: [
                          --link-workspace-packages=true,
                          --lockfile-only,
                          --prefer-frozen-lockfile=false,
                          --shamefully-hoist=false,
                          --shared-workspace-lockfile=true,
                          --strict-peer-dependencies=false,
                          --unsafe-perm=true
                        ]

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./build/builtin/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./build/builtin

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-build-builtin-Node-${{ matrix.node-version }}-Target
                  path: ./build/builtin/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./build/monaco/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./build/monaco

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-build-monaco-Node-${{ matrix.node-version }}-Target
                  path: ./build/monaco/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./build/npm/gyp/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./build/npm/gyp

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-build-npm-gyp-Node-${{ matrix.node-version }}-Target
                  path: ./build/npm/gyp/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./build/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./build

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-build-Node-${{ matrix.node-version }}-Target
                  path: ./build/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/bat/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/bat

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-bat-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/bat/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/clojure/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/clojure

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-clojure-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/clojure/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/coffeescript/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/coffeescript

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-coffeescript-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/coffeescript/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/configuration-editing/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/configuration-editing

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-configuration-editing-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/configuration-editing/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/cpp/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/cpp

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-cpp-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/cpp/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/csharp/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/csharp

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-csharp-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/csharp/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/css-language-features/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/css-language-features

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-css-language-features-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/css-language-features/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/css-language-features/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/css-language-features/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-css-language-features-server-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/css-language-features/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/css/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/css

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-css-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/css/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/dart/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/dart

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-dart-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/dart/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/debug-auto-launch/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/debug-auto-launch

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-debug-auto-launch-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/debug-auto-launch/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/debug-server-ready/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/debug-server-ready

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-debug-server-ready-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/debug-server-ready/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/diff/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/diff

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-diff-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/diff/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/docker/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/docker

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-docker-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/docker/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/emmet/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/emmet

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-emmet-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/emmet/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/extension-editing/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/extension-editing

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-extension-editing-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/extension-editing/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/fsharp/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/fsharp

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-fsharp-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/fsharp/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/git-base/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/git-base

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-git-base-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/git-base/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/git/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/git

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-git-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/git/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/github-authentication/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/github-authentication

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-github-authentication-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/github-authentication/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/github/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/github

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-github-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/github/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/go/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/go

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-go-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/go/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/groovy/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/groovy

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-groovy-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/groovy/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/grunt/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/grunt

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-grunt-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/grunt/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/gulp/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/gulp

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-gulp-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/gulp/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/handlebars/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/handlebars

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-handlebars-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/handlebars/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/hlsl/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/hlsl

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-hlsl-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/hlsl/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/html-language-features/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/html-language-features

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-html-language-features-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/html-language-features/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/html-language-features/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/html-language-features/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-html-language-features-server-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/html-language-features/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/html/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/html

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-html-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/html/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/ini/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/ini

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-ini-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/ini/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/ipynb/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/ipynb

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-ipynb-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/ipynb/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/jake/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/jake

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-jake-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/jake/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/java/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/java

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-java-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/java/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/javascript/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/javascript

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-javascript-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/javascript/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/json-language-features/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/json-language-features

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-json-language-features-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/json-language-features/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/json-language-features/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/json-language-features/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-json-language-features-server-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/json-language-features/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/json/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/json

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-json-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/json/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/julia/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/julia

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-julia-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/julia/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/latex/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/latex

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-latex-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/latex/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/less/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/less

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-less-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/less/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/log/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/log

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-log-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/log/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/lua/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/lua

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-lua-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/lua/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/make/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/make

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-make-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/make/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/markdown-basics/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/markdown-basics

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-markdown-basics-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/markdown-basics/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/markdown-language-features/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/markdown-language-features

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-markdown-language-features-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/markdown-language-features/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/markdown-language-features/server/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/markdown-language-features/server

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-markdown-language-features-server-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/markdown-language-features/server/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/markdown-math/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/markdown-math

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-markdown-math-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/markdown-math/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/media-preview/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/media-preview

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-media-preview-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/media-preview/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/merge-conflict/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/merge-conflict

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-merge-conflict-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/merge-conflict/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/microsoft-authentication/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/microsoft-authentication

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-microsoft-authentication-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/microsoft-authentication/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/notebook-renderers/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/notebook-renderers

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-notebook-renderers-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/notebook-renderers/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/npm/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/npm

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-npm-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/npm/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/objective-c/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/objective-c

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-objective-c-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/objective-c/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/perl/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/perl

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-perl-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/perl/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/php-language-features/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/php-language-features

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-php-language-features-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/php-language-features/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/php/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/php

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-php-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/php/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/powershell/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/powershell

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-powershell-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/powershell/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/pug/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/pug

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-pug-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/pug/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/python/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/python

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-python-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/python/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/r/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/r

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-r-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/r/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/razor/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/razor

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-razor-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/razor/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/references-view/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/references-view

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-references-view-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/references-view/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/restructuredtext/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/restructuredtext

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-restructuredtext-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/restructuredtext/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/ruby/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/ruby

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-ruby-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/ruby/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/rust/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/rust

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-rust-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/rust/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/scss/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/scss

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-scss-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/scss/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/search-result/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/search-result

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-search-result-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/search-result/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/shaderlab/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/shaderlab

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-shaderlab-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/shaderlab/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/shellscript/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/shellscript

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-shellscript-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/shellscript/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/simple-browser/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/simple-browser

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-simple-browser-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/simple-browser/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/sql/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/sql

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-sql-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/sql/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/swift/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/swift

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-swift-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/swift/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-abyss/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-abyss

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-abyss-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-abyss/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-defaults/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-defaults

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-defaults-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-defaults/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-kimbie-dark/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-kimbie-dark

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-kimbie-dark-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-kimbie-dark/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-monokai-dimmed/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-monokai-dimmed

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-monokai-dimmed-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-monokai-dimmed/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-monokai/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-monokai

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-monokai-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-monokai/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-quietlight/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-quietlight

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-quietlight-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-quietlight/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-red/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-red

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-red-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-red/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-seti/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-seti

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-seti-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-seti/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-solarized-dark/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-solarized-dark

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-solarized-dark-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-solarized-dark/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-solarized-light/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-solarized-light

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-solarized-light-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-solarized-light/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/theme-tomorrow-night-blue/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/theme-tomorrow-night-blue

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-theme-tomorrow-night-blue-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/theme-tomorrow-night-blue/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/tunnel-forwarding/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/tunnel-forwarding

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-tunnel-forwarding-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/tunnel-forwarding/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/typescript-basics/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/typescript-basics

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-typescript-basics-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/typescript-basics/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/typescript-language-features/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/typescript-language-features

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-typescript-language-features-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/typescript-language-features/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/vb/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/vb

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-vb-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/vb/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/vscode-api-tests/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/vscode-api-tests

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-vscode-api-tests-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/vscode-api-tests/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/vscode-colorize-tests/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/vscode-colorize-tests

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-vscode-colorize-tests-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/vscode-colorize-tests/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/vscode-test-resolver/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/vscode-test-resolver

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-vscode-test-resolver-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/vscode-test-resolver/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/xml/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/xml

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-xml-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/xml/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./extensions/yaml/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./extensions/yaml

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-extensions-yaml-Node-${{ matrix.node-version }}-Target
                  path: ./extensions/yaml/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./pnpm-lock.yaml

            - run: pnpm install
              working-directory: .

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-Node-${{ matrix.node-version }}-Target
                  path: ./Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./remote/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./remote

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-remote-Node-${{ matrix.node-version }}-Target
                  path: ./remote/Target

            - uses: actions/setup-node@v4.0.2
              with:
                  node-version: ${{ matrix.node-version }}
                  cache: "pnpm"
                  cache-dependency-path: ./remote/web/pnpm-lock.yaml

            - run: pnpm install
              working-directory: ./remote/web

            - run: pnpm run prepublishOnly
              working-directory: .

            - uses: actions/upload-artifact@v4.3.1
              with:
                  name: .-remote-web-Node-${{ matrix.node-version }}-Target
                  path: ./remote/web/Target
